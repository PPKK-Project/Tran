# ✈️ T-lan 프로젝트 API 명세서

## 🔑 인증 (Authentication)

| 구분 | 설명 |
| :--- | :--- |
| **인증 방식** | 모든 API 요청 헤더에 `Authorization: Bearer <JWT_TOKEN>`을 포함하여 인증합니다. |
| **로그인 응답** | `POST /login` 성공 시, 응답 헤더에 **JWT 토큰**을 포함하여 반환합니다. |

---

## 1. 사용자 API (`/users`, `/signup`)

사용자 계정 생성 및 정보 관리를 담당합니다.

| 기능 | Method | 엔드포인트 | 설명 |
| :--- | :--- | :--- | :--- |
| **회원 가입** | `POST` | `/signup` | 새로운 사용자 계정을 생성합니다. |
| **닉네임 조회** | `GET` | `/users/nickname` | 현재 로그인된 사용자의 닉네임을 조회합니다. |
| **닉네임 수정** | `PATCH` | `/users` | 현재 로그인된 사용자의 닉네임을 수정합니다. |
| **이메일 인증** | `GET` | `/verify-email` | 회원가입 시 이메일 주소의 유효성을 인증합니다. |

---

## 2. 여행 API (`/travels`)

여행(Travel)의 생성, 조회, 수정, 삭제를 처리합니다.

| 기능 | Method | 엔드포인트 | 설명 |
| :--- | :--- | :--- | :--- |
| **새로운 여행 생성** | `POST` | `/travels` | 제목, 국가 코드 등을 포함하여 새로운 여행을 생성합니다. |
| **내 여행 목록 조회** | `GET` | `/travels` | 내가 생성했거나 공유받은 모든 여행 목록을 조회합니다. |
| **특정 여행 상세 조회** | `GET` | `/travels/{travelId}` | 특정 여행의 상세 정보(기간, 참여자 등)를 조회합니다. |
| **특정 여행 정보 수정** | `PUT` | `/travels/{travelId}` | 여행의 제목, 기간 등 기본 정보를 수정합니다. |
| **특정 여행 삭제** | `DELETE` | `/travels/{travelId}` | 여행 계획을 삭제합니다. (**OWNER** 권한 필요) |

---

## 3. 세부 일정 API (`/travels/{travelId}/plans`)

여행 내의 날짜별, 순서별 세부 일정을 관리합니다.

| 기능 | Method | 엔드포인트 | 설명 |
| :--- | :--- | :--- | :--- |
| **세부 일정 추가** | `POST` | `/travels/{travelId}/plans` | 특정 여행의 일정에 새로운 장소(관광지, 숙소 등)를 추가합니다. |
| **세부 일정 목록 조회** | `GET` | `/travels/{travelId}/plans` | 특정 여행의 모든 세부 일정 목록을 조회합니다. |
| **세부 일정 수정** | `PUT` | `/travels/{travelId}/plans/{planId}` | 특정 일정 항목의 순서, 날짜, 메모 등을 수정합니다. |
| **세부 일정 삭제** | `DELETE` | `/travels/{travelId}/plans/{planId}` | 특정 일정 항목을 삭제합니다. |

---

## 4. 여행 공유 API (`/travels/{travelId}/share`)

특정 여행을 다른 사용자에게 공유하고 권한을 관리합니다.

| 기능 | Method | 엔드포인트 | 설명 |
| :--- | :--- | :--- | :--- |
| **사용자 초대** | `POST` | `/travels/{travelId}/share` | 이메일을 통해 다른 사용자를 여행에 초대하고 권한을 부여합니다. |
| **공유된 사용자 목록 조회** | `GET` | `/travels/{travelId}/share` | 해당 여행을 공유받은 모든 사용자의 목록과 권한을 조회합니다. |
| **사용자 권한 수정** | `PUT` | `/travels/{travelId}/share/{permissionId}` | 공유된 사용자의 권한(`VIEWER`, `EDITOR`)을 수정합니다. |
| **사용자 공유 취소** | `DELETE` | `/travels/{travelId}/share/{permissionId}` | 공유된 사용자를 여행에서 제외합니다. |

---

## 5. 항공편 API (`/flight`)

항공편 정보를 검색하고 여행에 추가합니다.

| 기능 | Method | 엔드포인트 | 설명 |
| :--- | :--- | :--- | :--- |
| **항공편 검색** | `GET` | `/flight` | 출발지, 도착지, 날짜 등의 조건으로 항공편을 검색합니다. |
| **여행에 항공편 추가** | `POST` | `/flight/{travelId}` | 검색된 항공편 정보를 특정 여행에 저장합니다. |

---

## 6. 외부 연동 API (`/api/*`)

Google API 등 외부 서비스와 연동하여 데이터를 조회합니다. (백엔드 서버를 통해 호출)

| 기능 | Method | 엔드포인트 | 설명 |
| :--- | :--- | :--- | :--- |
| **Google 장소 검색** | `GET` | `/api/place` | 키워드와 좌표를 기반으로 장소(숙소, 음식점 등)를 검색합니다. |
| **Google Geocoding** | `GET` | `/api/geocode` | 주소나 장소명을 위도/경도 좌표로 변환합니다. |
| **재외공관 정보 조회** | `GET` | `/api/embassy` | 국가 코드를 기반으로 재외공관(대사관) 정보를 조회합니다. |
| **환율 정보 조회** | `GET` | `/api/currency` | 실시간 환율 정보를 조회합니다. |
| **전 세계 여행경보 조회** | `GET` | `/api/countries` | 외교부의 여행경보 단계 정보를 조회합니다. |

---